# Анализ Систем. Урок 2

## ES диаграмма из первого урока
 ![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/657d2c64-0423-466c-ba8d-1015c42228e7)
 [ES диаграмма из первого урока в Miro](https://miro.com/app/board/uXjVMJdmY9o=/?moveToWidget=3458764554585875502&cot=14)


## Модель данных
 - TODO добавить скрин модели данных
 - TODO добавить ссылку на доску Miro


## Поддомены MCP

![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/4123d69a-90d3-4e74-908e-204b0f65764f)


## Характеристики поддоменов

| Вид поддомена                                 | Конкурентное преимущество     | Сложность         | Изменчивость        | Варианты реализации              | Интерес проблемы       | Предполагаемый вид поддомена      |
|-----------------------------------------------|-------------------------------|-------------------|---------------------|----------------------------------|------------------------|-----------------------------------|
| Работа с заказами                             | нет                           | высокая           | редкая              | ???                              | низкий                 | generic                           |
| Определение лучшего исполнителя для заказа    | да                            | высокая           | частая              | ???                              | высокий                | core                              |
| Повышение лояльности клиентов                 | нет                           | низкая            | редкая              | интеграция с внешним подрядчиком | низкий                 | generic                           |
| Найм лучших исполнителей                      | да                            | высокая           | частая              | ???                              | высокий                | core                              |
| Повышение мотивации менеджеров                | нет                           | низкая            | редкая              | ???                              | низкий                 | supporting                        |
| Повышение скорости обслуживания               | нет                           | низкая            | редкая              | ???                              | низкий                 | supporting                        |


## MCP Core Domain Chart

![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/3c6f21a2-b975-4406-b401-19f736bc12c9)


## Маппинг боундед-контекстов на поддомены

| Вид поддомена                                 | Предполагаемый вид поддомена      | Выделенный боундед-контекст                                                 |
|-----------------------------------------------|-----------------------------------|-----------------------------------------------------------------------------|
| Работа с заказами                             | generic                           | Система оформления и обработки заказов                                      |
| Определение лучшего исполнителя для заказа    | core                              | Система выбора воркера для заказа                                           |
| Повышение лояльности клиентов                 | generic                           | Инвентаризация и склад                                                      |
| Найм лучших исполнителей                      | core                              | ???                                                                         |
| Повышение мотивации менеджеров                | supporting                        | Система ставок и определния победителей                                     |
| Повышение скорости обслуживания               | supporting                        | Инвентаризация и склад                                                      |


![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/da3994f5-08d3-41e9-af8d-4fd50de7b978)


## Сравнение разницы боундед-контекстов после из первого урока и после разбивки боунд-контекстов на поддомены

Элементы, получившиеся после первого урока:
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/9d90cd68-15d7-45b5-a43f-26dc6ee0c4dd)

В двух выделенных местах 4 боундед-контекста из ES-модели, которые не сошлись с тем, что получилось после анализа поддоменов и боундед-контекстов.
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/c7da0d97-7866-4016-9a5a-b4cdd6c49f19)

Проанализируем группу #2, состояющую из 2-х боундед-контекстов: поиска, определение характеристик воркера и матчинга. Изначально предполагалось, что
все процессы разбиваются на два контекста, при этом они связаны между собой, так как необходимы для определеня характеристик воркера и матчинга его на заказы.
Но после анализа поддоменов и боундед-контекстов оказалось, что поддомен "Поиск и определение характеристик воркеров" состоит из трех частей: 
Обработка заявок от воркеров-кандидатов и тестирование, определение характеристик, основанное на результатах тестирования, расчет и выплата зарплат и премий.
Получается, что, выбрав для поиска контекстов один только Event Storming, мы совершили ошибку.

Группировка сделанная изначально:                                                                                                | Группировка после анализа поддоменов и боундед-контекстов:
---------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/f47ff83a-5c20-4780-afeb-6cb71714dd46)       | ![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/7c7cfcd1-999c-43a6-9107-ff49d0800c73)

Определяем связи между боундед-контекстами:
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/3e11980d-3d00-4899-a408-1ac50cb2077a)


## Обновленная после анализа поддоменов и боундед-контекстов ES-диаграмма
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/41e077e9-c2cf-4aaa-bc8c-d362bfbe1251)
[Обновленная ES-диаграмма в Miro](https://miro.com/app/board/uXjVMJdmY9o=/?moveToWidget=3458764555199476231&cot=14)


## Обновленная после анализа поддоменов и боундед-контекстов модель данных
TODO обновить модель данных


## Выбираем стиль для MCP

Наиболее важные характеристики системы:
 - высокие **scalability** и **elasticity** для боундед-контекста "Обработка заявок от воркеров-кандидатов и тестирование" исходя из условия `[US-081] Мы ожидаем 1к заявок в день от рандомных котов`;
 - высокие **agility**, **testability** и **deployability** исходя из условий `Бизнесу необходим низкий ТТМ (Time To Market), чтобы конкурировать на рынке.` для системы в целом;
 - высокие **evolvability** и **modifiability** для боундед-контекста "Определение характеристик воркера, основанное на результате тестирования" из-за требования `Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.`;
 - **high model complexity**, а значит, **modifiability** и **maintainability**, которые относятся к двум поддоменам «Найм лучших исполнителей» и «Определение лучшего исполнителя для заказа». Мы взяли эту характеристику из характеристик core-поддоменов. Важно учитывать, что для этих core-поддоменов нужен низкий каплинг;
 - высокие **scalability**, **modifiability**, **maintainability**, **testability**, **agility** и **evolvability** для всей системы потому что она находится на этапе роста.

Выделим зеленым все требуемые характеристики в таблице сравнения характеристик разных стилей построения систем
![изображение](https://github.com/mechanicalmachine/systems-analysis/assets/30704273/d9485140-79c9-4ed3-a0f1-ca922148e4bd)

Исходя из таблицы сравнения разных стилей построения систем для реализации MCP наилучшим образом подходит **микросервисная архитектура**. 
Но так как микросервисная архитектура наиболее дорогой тип архитектуры для реализации - связи между поддоменами будут синхронными, что позволит несколько сократить финансовые и 
временные затраты на реализацию системы.






















